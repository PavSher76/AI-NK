# üìä –ü–õ–ê–ù –î–ê–®–ë–û–ê–†–î–ê - OLLAMA –ò –ù–û–†–ú–û–ö–û–ù–¢–†–û–õ–¨

## üéØ **–¶–µ–ª—å:**
–°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –¥–∞—à–±–æ–∞—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
- **–°—Ç–∞—Ç—É—Å–∞ —Ä–∞–±–æ—Ç—ã Ollama**
- **–ü—Ä–æ—Ü–µ—Å—Å–∞ –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è**
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã**

## üîß **–¢–ï–ö–£–©–ò–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò –°–ò–°–¢–ï–ú–´:**

### **1. Ollama API:**
```json
{
  "models": [
    {
      "name": "llama3.1-optimized-v2:latest",
      "size": 4920753842,
      "details": {
        "parameter_size": "8.0B",
        "quantization_level": "Q4_K_M"
      }
    }
  ]
}
```

### **2. –ù–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å API:**
```json
{
  "norm_control_result": {
    "analysis_status": "uncertain",
    "total_findings": 2,
    "critical_findings": 0,
    "warning_findings": 1,
    "info_findings": 1
  }
}
```

### **3. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:**
- ‚úÖ `documents` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ `checkable_documents` - –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- ‚úÖ `elements` - –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- ‚úÖ `norm_control` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è
- ‚úÖ `performance` - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ `reports` - –æ—Ç—á–µ—Ç—ã

## üìà **–ü–†–ï–î–õ–ê–ì–ê–ï–ú–´–ï –ú–ï–¢–†–ò–ö–ò –î–õ–Ø –î–ê–®–ë–û–ê–†–î–ê:**

### **üîß –°–ï–ö–¶–ò–Ø 1: OLLAMA STATUS**

#### **1.1 –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞ Ollama:**
```json
{
  "ollama_status": {
    "service_health": "healthy/unhealthy",
    "uptime": "HH:MM:SS",
    "last_heartbeat": "2025-08-25T19:XX:XX",
    "memory_usage": "X.X GB / Y.Y GB",
    "cpu_usage": "XX.X%",
    "active_connections": 5
  }
}
```

#### **1.2 –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:**
```json
{
  "models": {
    "total_models": 3,
    "active_model": "llama3.1-optimized-v2:latest",
    "model_details": {
      "name": "llama3.1-optimized-v2:latest",
      "size_gb": 4.92,
      "parameter_size": "8.0B",
      "quantization": "Q4_K_M",
      "last_used": "2025-08-25T19:XX:XX"
    }
  }
}
```

#### **1.3 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å LLM:**
```json
{
  "llm_performance": {
    "requests_last_hour": 15,
    "average_response_time": "XX.X seconds",
    "success_rate": "XX.X%",
    "timeout_rate": "X.X%",
    "tokens_generated": 12500,
    "tokens_per_second": 45.2
  }
}
```

### **üîç –°–ï–ö–¶–ò–Ø 2: –ù–û–†–ú–û–ö–û–ù–¢–†–û–õ–¨**

#### **2.1 –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
```json
{
  "normcontrol_overview": {
    "total_documents": 3,
    "pending_reviews": 1,
    "completed_reviews": 2,
    "in_progress_reviews": 0,
    "overdue_reviews": 0,
    "success_rate": "XX.X%"
  }
}
```

#### **2.2 –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–æ–∫:**
```json
{
  "normcontrol_results": {
    "total_findings": 5,
    "critical_findings": 0,
    "warning_findings": 3,
    "info_findings": 2,
    "compliance_rate": "XX.X%",
    "average_findings_per_document": 1.67
  }
}
```

#### **2.3 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è:**
```json
{
  "normcontrol_performance": {
    "average_processing_time": "XX.X minutes",
    "documents_processed_today": 2,
    "pages_processed": 15,
    "llm_calls": 25,
    "average_llm_response_time": "XX.X seconds",
    "timeout_occurrences": 1
  }
}
```

### **üìä –°–ï–ö–¶–ò–Ø 3: –î–ï–¢–ê–õ–¨–ù–´–ô –¢–†–ï–ô–°–õ–û–ì**

#### **3.1 –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
```json
{
  "timing_metrics": {
    "upload_time": "X.XX seconds",
    "indexing_time": "X.XX seconds",
    "llm_processing_time": "XX.XX seconds",
    "report_generation_time": "X.XX seconds",
    "total_processing_time": "XX.XX seconds"
  }
}
```

#### **3.2 –ü–æ—à–∞–≥–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```json
{
  "step_metrics": {
    "upload_success_rate": "100%",
    "indexing_success_rate": "100%",
    "llm_success_rate": "96%",
    "report_success_rate": "100%",
    "last_error": "httpx.ReadTimeout at 2025-08-25T19:25:00"
  }
}
```

## üé® **–°–¢–†–£–ö–¢–£–†–ê –î–ê–®–ë–û–ê–†–î–ê:**

### **üì± –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å:**

#### **–í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞ - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤:**
```
[üü¢ Ollama] [üü¢ Document Parser] [üü¢ RAG Service] [üü° Gateway]
```

#### **–°–µ–∫—Ü–∏—è 1 - Ollama Status:**
- **–ö–∞—Ä—Ç–æ—á–∫–∞ 1:** –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞ (–∑–µ–ª–µ–Ω—ã–π/–∫—Ä–∞—Å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä)
- **–ö–∞—Ä—Ç–æ—á–∫–∞ 2:** –ê–∫—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ–ª—å –∏ –µ—ë –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- **–ö–∞—Ä—Ç–æ—á–∫–∞ 3:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU, RAM)
- **–ì—Ä–∞—Ñ–∏–∫ 1:** –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ LLM –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
- **–ì—Ä–∞—Ñ–∏–∫ 2:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM

#### **–°–µ–∫—Ü–∏—è 2 - –ù–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å:**
- **–ö–∞—Ä—Ç–æ—á–∫–∞ 1:** –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–ö–∞—Ä—Ç–æ—á–∫–∞ 2:** –î–æ–∫—É–º–µ–Ω—Ç—ã –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ
- **–ö–∞—Ä—Ç–æ—á–∫–∞ 3:** –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫
- **–ì—Ä–∞—Ñ–∏–∫ 1:** –ù–∞—Ö–æ–¥–∫–∏ –ø–æ —Ç–∏–ø–∞–º (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ/–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è/–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
- **–ì—Ä–∞—Ñ–∏–∫ 2:** –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### **–°–µ–∫—Ü–∏—è 3 - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- **–ö–∞—Ä—Ç–æ—á–∫–∞ 1:** –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–ö–∞—Ä—Ç–æ—á–∫–∞ 2:** –¢–æ–∫–µ–Ω—ã –≤ —Å–µ–∫—É–Ω–¥—É
- **–ö–∞—Ä—Ç–æ—á–∫–∞ 3:** –ü—Ä–æ—Ü–µ–Ω—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤
- **–ì—Ä–∞—Ñ–∏–∫ 1:** –î–µ—Ç–∞–ª—å–Ω—ã–π —Ç—Ä–µ–π—Å–ª–æ–≥ –≤—Ä–µ–º–µ–Ω–∏
- **–ì—Ä–∞—Ñ–∏–∫ 2:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

### **üìä –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø–∞–Ω–µ–ª–∏:**

#### **–ü–∞–Ω–µ–ª—å 1: Ollama Analytics**
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–¥–µ–ª—è–º
- –ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –õ–æ–≥–∏ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### **–ü–∞–Ω–µ–ª—å 2: Normcontrol Analytics**
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- –ê–Ω–∞–ª–∏–∑ –Ω–∞—Ö–æ–¥–æ–∫ –ø–æ —Ç–∏–ø–∞–º
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### **–ü–∞–Ω–µ–ª—å 3: System Performance**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –°–µ—Ç–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø:**

### **1. –ù–æ–≤—ã–µ API endpoints:**

#### **Ollama Status API:**
```python
@app.get("/api/ollama/status")
async def get_ollama_status():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ Ollama"""
    return {
        "service_health": "healthy",
        "uptime": "02:15:30",
        "memory_usage": "6.2 GB / 8.0 GB",
        "cpu_usage": "45.2%",
        "active_connections": 3
    }
```

#### **Ollama Performance API:**
```python
@app.get("/api/ollama/performance")
async def get_ollama_performance():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Ollama"""
    return {
        "requests_last_hour": 15,
        "average_response_time": 2.34,
        "success_rate": 96.7,
        "tokens_per_second": 45.2
    }
```

#### **Normcontrol Analytics API:**
```python
@app.get("/api/normcontrol/analytics")
async def get_normcontrol_analytics():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è"""
    return {
        "total_documents": 3,
        "compliance_rate": 85.7,
        "average_findings": 1.67,
        "processing_efficiency": 92.3
    }
```

### **2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus:**

#### **–ú–µ—Ç—Ä–∏–∫–∏ Ollama:**
```python
# ollama_requests_total
# ollama_response_time_seconds
# ollama_memory_usage_bytes
# ollama_cpu_usage_percent
```

#### **–ú–µ—Ç—Ä–∏–∫–∏ –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è:**
```python
# normcontrol_documents_total
# normcontrol_findings_total
# normcontrol_processing_time_seconds
# normcontrol_success_rate
```

### **3. Grafana Dashboard:**

#### **–ü–∞–Ω–µ–ª–∏ –¥–ª—è Ollama:**
- **Time Series:** –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ LLM
- **Stat:** –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
- **Gauge:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- **Bar Chart:** –ó–∞–ø—Ä–æ—Å—ã –ø–æ —á–∞—Å–∞–º

#### **–ü–∞–Ω–µ–ª–∏ –¥–ª—è –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è:**
- **Time Series:** –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **Pie Chart:** –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Ö–æ–¥–æ–∫
- **Stat:** –ü—Ä–æ—Ü–µ–Ω—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
- **Table:** –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

## üéØ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –î–ê–®–ë–û–ê–†–î–ê:**

### **1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
- ‚úÖ –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å LLM
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è

### **2. –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –†–∞–Ω–Ω–µ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏

### **3. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å:**
- ‚úÖ –¢—Ä–µ–Ω–¥—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ ROI –∞–Ω–∞–ª–∏–∑–∞

## üìä **–°—Ç–∞—Ç—É—Å:**
**üìã –ü–õ–ê–ù –ì–û–¢–û–í - –¢–†–ï–ë–£–ï–¢–°–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø**

### **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ API endpoints**
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Prometheus –º–µ—Ç—Ä–∏–∫–∏**
3. **–°–æ–∑–¥–∞—Ç—å Grafana –¥–∞—à–±–æ–∞—Ä–¥**
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã**

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 25.08.2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** üìã –ü–õ–ê–ù –ì–û–¢–û–í
