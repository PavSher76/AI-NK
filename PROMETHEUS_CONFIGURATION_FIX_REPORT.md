# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Prometheus

## –ü—Ä–æ–±–ª–µ–º–∞
–í –ª–æ–≥–∞—Ö –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `norms-db` –Ω–∞–±–ª—é–¥–∞–ª–∏—Å—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –æ—à–∏–±–∫–∏:
```
invalid length of startup packet
```

–≠—Ç–∏ –æ—à–∏–±–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å IP –∞–¥—Ä–µ—Å–æ–≤:
- `172.18.0.7` (ai-nk-prometheus-1)
- `172.18.0.6` (ai-nk-redis-1)

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
1. **–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤**: –û—à–∏–±–∫–∏ "invalid length of startup packet" —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –ø–æ–ø—ã—Ç–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞**: –ß–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ —Å–µ—Ç–∏ Docker –±—ã–ª–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —á—Ç–æ –æ—à–∏–±–∫–∏ –∏—Å—Ö–æ–¥—è—Ç –æ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ Prometheus –∏ Redis
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: –í —Ñ–∞–π–ª–µ `configs/prometheus.yml` –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –ø–æ–ø—ã—Ç–∫–∏ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ —Å PostgreSQL –∏ Redis

## –ü—Ä–∏—á–∏–Ω–∞
–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Prometheus –±—ã–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∑–∞–¥–∞—á–∏ –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ —Å:
- PostgreSQL (`norms-db:5432`)
- Redis (`redis:6379`)

–û–¥–Ω–∞–∫–æ —ç—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Prometheus, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–æ–ø—ã—Ç–∫–∞–º HTTP-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –ø–æ—Ä—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –æ–∂–∏–¥–∞—é—Ç PostgreSQL –∏ Redis –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.

## –†–µ—à–µ–Ω–∏–µ
1. **–ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–¥–∞—á**: –í —Ñ–∞–π–ª–µ `configs/prometheus.yml` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–¥–∞—á–∏:
   ```yaml
   # PostgreSQL (–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ–º, —Ç–∞–∫ –∫–∞–∫ –Ω–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞ –º–µ—Ç—Ä–∏–∫)
   # - job_name: 'postgres'
   #   static_configs:
   #     - targets: ['norms-db:5432']
   #   metrics_path: '/metrics'

   # Redis (–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ–º, —Ç–∞–∫ –∫–∞–∫ –Ω–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞ –º–µ—Ç—Ä–∏–∫)
   # - job_name: 'redis'
   #   static_configs:
   #     - targets: ['redis:6379']
   #   metrics_path: '/metrics'
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Prometheus**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `ai-nk-prometheus-1` –±—ã–ª –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –û—à–∏–±–∫–∏ "invalid length of startup packet" –ø—Ä–µ–∫—Ä–∞—Ç–∏–ª–∏—Å—å
- ‚úÖ Prometheus —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (gateway, document-parser, rule-engine, rag-service) –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. **–î–ª—è PostgreSQL –º–µ—Ç—Ä–∏–∫**: –ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ PostgreSQL, —Å–ª–µ–¥—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `postgres_exporter`
2. **–î–ª—è Redis –º–µ—Ç—Ä–∏–∫**: –ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Redis, —Å–ª–µ–¥—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `redis_exporter`
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø–æ–¥–æ–±–Ω—ã—Ö –æ—à–∏–±–æ–∫

## –°—Ç–∞—Ç—É—Å
üü¢ **–†–ï–®–ï–ù–û** - –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
