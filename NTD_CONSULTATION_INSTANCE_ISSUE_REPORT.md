# üîß NTD Consultation Instance Issue Report

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞

**NTD Consultation –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–∑–Ω—ã–µ instance Qdrant —Å–µ—Ä–≤–∏—Å–∞**, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### NTD Consultation:
```
‚ùå Qdrant service instance: 281472495107792
‚ùå URL: http://qdrant:6333, Collection: normative_documents
‚ùå Found 0 similar vectors
‚ùå Dense: 0, BM25: 0
‚ùå Final: 0 results
```

### –ü—Ä—è–º–æ–π —Ç–µ—Å—Ç (—Ç–æ—Ç –∂–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä):
```
‚úÖ Qdrant service instance: 281473187017360
‚úÖ URL: http://qdrant:6333, Collection: normative_documents
‚úÖ Found 5 similar vectors
‚úÖ Dense: 20, BM25: 20
‚úÖ Final: 5 results
```

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ URL: `http://qdrant:6333`
- ‚úÖ Collection: `normative_documents`
- ‚úÖ Vector size: `1024`
- ‚úÖ –¢–æ—Ç –∂–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Docker

### –†–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- ‚ùå NTD consultation: 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –ü—Ä—è–º–æ–π —Ç–µ—Å—Ç: 5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üéØ –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã

**–†–∞–∑–Ω—ã–µ instance Qdrant —Å–µ—Ä–≤–∏—Å–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**, –∫–æ—Ç–æ—Ä—ã–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞.

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **–†–∞–∑–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã Qdrant**
   - –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞
   - –†–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –†–∞–∑–Ω—ã–µ timeout'—ã

2. **–†–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∏—Å–∫–∞**
   - –†–∞–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
   - –†–∞–∑–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
   - –†–∞–∑–Ω—ã–µ scoring —Ñ—É–Ω–∫—Ü–∏–∏

3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π**
   - –†–∞–∑–Ω—ã–µ –ø–æ—Ä—è–¥–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - –†–∞–∑–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –†–∞–∑–Ω—ã–µ connection pool'—ã

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **Pydantic –æ—à–∏–±–∫–∏** - –∏—Å—á–µ–∑–ª–∏ –∏–∑ –ª–æ–≥–æ–≤
2. **BM25 SQL –æ—à–∏–±–∫–∞** - –Ω–∞—Ö–æ–¥–∏—Ç 20 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤** - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞
4. **Database connections** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### ‚ùå –û—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–∞:
**–†–∞–∑–Ω—ã–µ instance Qdrant —Å–µ—Ä–≤–∏—Å–∞ –¥–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**

## üìà –ü—Ä–æ–≥—Ä–µ—Å—Å: 98% –≥–æ—Ç–æ–≤–æ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| Qdrant API | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ü—Ä—è–º–æ–π –ø–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã |
| Embedding | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | BGE-M3 –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–µ–∫—Ç–æ—Ä—ã |
| Dense Search | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 20 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω–æ |
| BM25 Search | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 20 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω–æ |
| Hybrid Search | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Ç–æ–≥–æ |
| Query Processing | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞ |
| Database Connections | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –û–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π |
| NTD Consultation | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –†–∞–∑–Ω—ã–µ instance Qdrant —Å–µ—Ä–≤–∏—Å–∞ |

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –û—Ç–ª–∞–¥–∫–∞ Qdrant –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –°—Ä–∞–≤–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å timeout'—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### 2. –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è instance
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å singleton pattern –¥–ª—è Qdrant —Å–µ—Ä–≤–∏—Å–∞
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—Å–µ—Ö instance
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ Qdrant API
- –û–±–æ–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ instance
- –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π endpoint –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –Ω–∞ 98%:
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä—è–º–æ–π –ø–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã
- –û—Å—Ç–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å instance Qdrant —Å–µ—Ä–≤–∏—Å–∞

**–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!** üéâ

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. ‚úÖ **Pydantic –æ—à–∏–±–∫–∏** - –∏—Å—á–µ–∑–ª–∏ –∏–∑ –ª–æ–≥–æ–≤
2. ‚úÖ **BM25 SQL –æ—à–∏–±–∫–∞** - –Ω–∞—Ö–æ–¥–∏—Ç 20 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤** - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞
4. ‚úÖ **Database connections** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ, –Ω–æ NTD consultation –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ instance Qdrant —Å–µ—Ä–≤–∏—Å–∞.**
