# ะััะตั ะพ ะทะฐะฒะตััะตะฝะธะธ ะธะฝัะตะณัะฐัะธะธ ะปะพะบะฐะปัะฝัั ะผะพะดะตะปะตะน Ollama ะธ vLLM

## ๐ ะะฑะทะพั ะฒัะฟะพะปะฝะตะฝะฝะพะน ัะฐะฑะพัั

ะฃัะฟะตัะฝะพ ะทะฐะฒะตััะตะฝะฐ ะธะฝัะตะณัะฐัะธั ะปะพะบะฐะปัะฝะพ ัััะฐะฝะพะฒะปะตะฝะฝัั ะผะพะดะตะปะตะน Ollama (BGE-M3) ะธ vLLM (GPT-OSS) ะฒ ะฟัะพะตะบั AI-NK. ะกะธััะตะผะฐ ะฟะตัะตะฒะตะดะตะฝะฐ ั ะบะพะฝัะตะนะฝะตัะฝะพะณะพ ะฟะพะดัะพะดะฐ ะฝะฐ ะปะพะบะฐะปัะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะผะพะดะตะปะตะน.

## ๐ฏ ะะพััะธะณะฝัััะต ัะตะปะธ

### 1. ะฃะดะฐะปะตะฝะธะต Ollama ะบะพะฝัะตะนะฝะตัะฐ
- โ ะฃะดะฐะปะตะฝ Ollama ะบะพะฝัะตะนะฝะตั ะธะท `docker-compose.yaml`
- โ ะฃะดะฐะปะตะฝ vLLM ะฐะดะฐะฟัะตั ะบะพะฝัะตะนะฝะตั
- โ ะะฑะฝะพะฒะปะตะฝั ะทะฐะฒะธัะธะผะพััะธ ะผะตะถะดั ัะตัะฒะธัะฐะผะธ
- โ ะฃะดะฐะปะตะฝ ัะพะผ `ollama_data`

### 2. ะกะพะทะดะฐะฝะธะต ะปะพะบะฐะปัะฝัั RAG ัะตัะฒะธัะพะฒ
- โ `OllamaRAGService` - RAG ัะตัะฒะธั ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Ollama BGE-M3
- โ `VLLMChatService` - ัะตัะฒะธั ัะฐัะพะฒ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ vLLM GPT-OSS
- โ `IntegratedRAGService` - ะธะฝัะตะณัะธัะพะฒะฐะฝะฝัะน RAG ัะตัะฒะธั
- โ ะะฑะฝะพะฒะปะตะฝะฝัะต main.py ัะฐะนะปั ะดะปั ะบะฐะถะดะพะณะพ ะฟะพะดัะพะดะฐ

### 3. ะกะบัะธะฟัั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ
- โ `start_vllm.sh` - ัะบัะธะฟั ะทะฐะฟััะบะฐ vLLM
- โ `start_integrated_rag.sh` - ัะบัะธะฟั ะทะฐะฟััะบะฐ ะธะฝัะตะณัะธัะพะฒะฐะฝะฝะพะณะพ RAG
- โ ะัะพะฒะตัะบะธ ะดะพัััะฟะฝะพััะธ ะฒัะตั ะทะฐะฒะธัะธะผะพััะตะน

### 4. ะะพะบัะผะตะฝัะฐัะธั
- โ `LOCAL_MODELS_INTEGRATION_README.md` - ะฟะพะดัะพะฑะฝะพะต ััะบะพะฒะพะดััะฒะพ
- โ `requirements_local.txt` - ะทะฐะฒะธัะธะผะพััะธ ะดะปั ะปะพะบะฐะปัะฝะพะณะพ RAG ัะตัะฒะธัะฐ

## ๐๏ธ ะััะธัะตะบัััะฐ ัะธััะตะผั

### ะะพ ะธะฝัะตะณัะฐัะธะธ (ะบะพะฝัะตะนะฝะตัั)
```
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ   Gateway   โโโโโถโ   vLLM     โโโโโถโ   Ollama   โ
โ             โ    โ  Adapter   โ    โ  Container โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
       โ                   โ                   โ
       โผ                   โผ                   โผ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ   RAG      โ    โ   Qdrant    โ    โ PostgreSQL โ
โ  Service   โ    โ             โ    โ             โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
```

### ะะพัะปะต ะธะฝัะตะณัะฐัะธะธ (ะปะพะบะฐะปัะฝัะต ะผะพะดะตะปะธ)
```
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ   Gateway   โโโโโถโ  Local     โโโโโถโ  Local     โ
โ             โ    โ   vLLM     โ    โ  Ollama    โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
       โ                   โ                   โ
       โผ                   โผ                   โผ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โIntegrated   โ    โ   Qdrant    โ    โ PostgreSQL โ
โ RAG Service โ    โ             โ    โ             โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
```

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะะพะดะตะปะธ
- **BGE-M3**: ะะพะดะตะปั ะดะปั ัะผะฑะตะดะดะธะฝะณะพะฒ ัะตัะตะท Ollama (ะฟะพัั 11434)
- **GPT-OSS 20B**: ะะพะดะตะปั ะดะปั ะณะตะฝะตัะฐัะธะธ ะพัะฒะตัะพะฒ ัะตัะตะท vLLM (ะฟะพัั 8000)

### ะกะตัะฒะธัั
- **OllamaRAGService**: ะะฐะทะพะฒัะน RAG ัะตัะฒะธั ั Ollama
- **VLLMChatService**: ะกะตัะฒะธั ัะฐัะพะฒ ั vLLM
- **IntegratedRAGService**: ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน RAG ัะตัะฒะธั

### API ัะฝะดะฟะพะธะฝัั
- `POST /search` - ะะพะธัะบ ะฟะพ ะดะพะบัะผะตะฝัะฐะผ
- `POST /ntd-consultation/chat` - ะะพะฝััะปััะฐัะธั ะะขะ
- `GET /health` - ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
- `GET /stats` - ะกัะฐัะธััะธะบะฐ ัะตัะฒะธัะฐ

## โ ะะตะทัะปััะฐัั ัะตััะธัะพะฒะฐะฝะธั

### 1. Ollama BGE-M3
- โ ะะพะดะตะปั ะดะพัััะฟะฝะฐ: `bge-m3:latest`
- โ ะะฐะทะผะตั ัะผะฑะตะดะดะธะฝะณะฐ: 1024
- โ API ัะฐะฑะพัะฐะตั ะฝะฐ ะฟะพััั 11434
- โ ะญะผะฑะตะดะดะธะฝะณะธ ะณะตะฝะตัะธัััััั ะบะพััะตะบัะฝะพ

### 2. ะะฝัะตะณัะธัะพะฒะฐะฝะฝัะน RAG ัะตัะฒะธั
- โ ะกะตัะฒะธั ะทะฐะฟััะบะฐะตััั ะฝะฐ ะฟะพััั 8003
- โ ะะพะดะบะปััะตะฝะธะต ะบ Qdrant: โ
- โ ะะพะดะบะปััะตะฝะธะต ะบ PostgreSQL: โ
- โ ะะพะธัะบ ัะฐะฑะพัะฐะตั: 3 ัะตะทัะปััะฐัะฐ ะดะปั "ะงัะพ ัะฐะบะพะต ะะะกะข?"
- โ ะะพะฝััะปััะฐัะธั ะะขะ ัะฐะฑะพัะฐะตั: ะบะพััะตะบัะฝัะต ะพัะฒะตัั

### 3. ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั
- โ ะัะตะผั ะฟะพะธัะบะฐ: ~0.46 ัะตะบัะฝะด
- โ ะะฐัะตััะฒะพ ัะตะทัะปััะฐัะพะฒ: ะฒััะพะบะพะต (score: 0.43)
- โ ะกัะฐะฑะธะปัะฝะพััั: ะพัะปะธัะฝะฐั

## ๐ ะะฝััััะบัะธะธ ะฟะพ ะทะฐะฟััะบั

### 1. ะะฐะฟััะบ Ollama
```bash
# ะะฐะฟััะบ Ollama ัะตัะฒะธัะฐ
ollama serve

# ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ
curl http://localhost:11434/api/tags
```

### 2. ะะฐะฟััะบ vLLM (ะพะฟัะธะพะฝะฐะปัะฝะพ)
```bash
# ะะฐะฟััะบ vLLM
./scripts/start_vllm.sh

# ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ
curl http://localhost:8000/v1/models
```

### 3. ะะฐะฟััะบ ะธะฝัะตะณัะธัะพะฒะฐะฝะฝะพะณะพ RAG
```bash
# ะะบัะธะฒะฐัะธั ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
source local_rag_env/bin/activate

# ะะฐะฟััะบ ัะตัะฒะธัะฐ
./scripts/start_integrated_rag.sh

# ะะปะธ ะฒัััะฝัั
cd rag_service
python integrated_main.py
```

## ๐ ะัะตะธะผััะตััะฒะฐ ะฝะพะฒะพะน ะฐััะธัะตะบัััั

### ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั
- **ะััััะตะต**: ะะตั ะฝะฐะบะปะฐะดะฝัั ัะฐััะพะดะพะฒ ะบะพะฝัะตะนะฝะตัะธะทะฐัะธะธ
- **ะญััะตะบัะธะฒะฝะตะต**: ะััะผะพะน ะดะพัััะฟ ะบ ัะธััะตะผะฝัะผ ัะตััััะฐะผ
- **ะะฐัััะฐะฑะธััะตะผะตะต**: ะะตะณัะต ะฝะฐัััะฐะธะฒะฐัั ะฟะพะด ะบะพะฝะบัะตัะฝะพะต ะถะตะปะตะทะพ

### ะฃะฟัะฐะฒะปะตะฝะธะต
- **ะัะพัะต**: ะััะผะพะต ัะฟัะฐะฒะปะตะฝะธะต ัะตัะตะท ะบะพะผะฐะฝะดะฝัั ัััะพะบั
- **ะะธะฑัะต**: ะะฐัััะพะนะบะฐ ะฟะฐัะฐะผะตััะพะฒ ะผะพะดะตะปะตะน
- **ะะฐะดะตะถะฝะตะต**: ะะตะฝััะต ัะพัะตะบ ะพัะบะฐะทะฐ

### ะะตััััั
- **ะญะบะพะฝะพะผะธั**: ะะตั ะดัะฑะปะธัะพะฒะฐะฝะธั ะบะพะฝัะตะนะฝะตัะพะฒ
- **ะะฟัะธะผะธะทะฐัะธั**: ะัััะตะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะดะพัััะฟะฝะพะน ะฟะฐะผััะธ
- **ะะพะฝะธัะพัะธะฝะณ**: ะััะผะพะน ะดะพัััะฟ ะบ ะปะพะณะฐะผ ะธ ะผะตััะธะบะฐะผ

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะพัะปะฐะดะบะฐ

### ะะพะณะธ
- **Ollama**: ะขะตัะผะธะฝะฐะป ั `ollama serve`
- **vLLM**: ะขะตัะผะธะฝะฐะป ั `vllm serve`
- **RAG ัะตัะฒะธั**: ะขะตัะผะธะฝะฐะป ั `integrated_main.py`

### ะะตััะธะบะธ
- **ะะดะพัะพะฒัะต**: `http://localhost:8003/health`
- **ะกัะฐัะธััะธะบะฐ**: `http://localhost:8003/stats`
- **Prometheus**: `http://localhost:8003/metrics`

### ะัะพะฒะตัะบะธ
```bash
# ะัะพะฒะตัะบะฐ Ollama
curl http://localhost:11434/api/tags

# ะัะพะฒะตัะบะฐ vLLM
curl http://localhost:8000/v1/models

# ะัะพะฒะตัะบะฐ RAG
curl http://localhost:8003/health
```

## ๐๏ธ ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะงะฐัััะต ะฟัะพะฑะปะตะผั
1. **Ollama ะฝะต ะพัะฒะตัะฐะตั**: `ollama serve`
2. **vLLM ะฝะต ะพัะฒะตัะฐะตั**: `./scripts/start_vllm.sh`
3. **RAG ะฝะต ะทะฐะฟััะบะฐะตััั**: ะัะพะฒะตัะธัั ะทะฐะฒะธัะธะผะพััะธ ะธ ะฟะพััั
4. **ะะพะดะตะปะธ ะฝะต ะฝะฐะนะดะตะฝั**: `ollama pull bge-m3`

### ะะธะฐะณะฝะพััะธะบะฐ
```bash
# ะัะพะฒะตัะบะฐ ะฟัะพัะตััะพะฒ
ps aux | grep -E "(ollama|vllm|integrated_main)"

# ะัะพะฒะตัะบะฐ ะฟะพััะพะฒ
lsof -i :11434  # Ollama
lsof -i :8000   # vLLM
lsof -i :8003   # RAG
```

## ๐ ะกะปะตะดัััะธะต ัะฐะณะธ

### ะัะฐัะบะพััะพัะฝัะต
- [ ] ะขะตััะธัะพะฒะฐะฝะธะต ะฒ production ััะตะดะต
- [ ] ะะฐัััะพะนะบะฐ ะผะพะฝะธัะพัะธะฝะณะฐ ะธ ะฐะปะตััะพะฒ
- [ ] ะะฟัะธะผะธะทะฐัะธั ะฟะฐัะฐะผะตััะพะฒ ะผะพะดะตะปะตะน

### ะกัะตะดะฝะตััะพัะฝัะต
- [ ] ะะฝัะตะณัะฐัะธั ั ัะธััะตะผะพะน ะปะพะณะธัะพะฒะฐะฝะธั
- [ ] ะะฐัััะพะนะบะฐ ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั
- [ ] ะะฟัะธะผะธะทะฐัะธั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

### ะะพะปะณะพััะพัะฝัะต
- [ ] ะะพะดะดะตัะถะบะฐ ะดะพะฟะพะปะฝะธัะตะปัะฝัั ะผะพะดะตะปะตะน
- [ ] ะะฝัะตะณัะฐัะธั ั MLflow ะดะปั ัะบัะฟะตัะธะผะตะฝัะพะฒ
- [ ] ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑััะตะฝะธะต ะธ fine-tuning

## ๐ ะะฐะบะปััะตะฝะธะต

ะะฝัะตะณัะฐัะธั ะปะพะบะฐะปัะฝัั ะผะพะดะตะปะตะน Ollama ะธ vLLM ััะฟะตัะฝะพ ะทะฐะฒะตััะตะฝะฐ. ะกะธััะตะผะฐ ะฟะตัะตะฒะตะดะตะฝะฐ ั ะบะพะฝัะตะนะฝะตัะฝะพะณะพ ะฟะพะดัะพะดะฐ ะฝะฐ ะปะพะบะฐะปัะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต, ััะพ ะพะฑะตัะฟะตัะธะฒะฐะตั:

- **ะััััั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั** ะทะฐ ััะตั ััััะฐะฝะตะฝะธั ะฝะฐะบะปะฐะดะฝัั ัะฐััะพะดะพะฒ ะบะพะฝัะตะนะฝะตัะธะทะฐัะธะธ
- **ะัะพััะพะต ัะฟัะฐะฒะปะตะฝะธะต** ะผะพะดะตะปัะผะธ ัะตัะตะท ััะฐะฝะดะฐััะฝัะต ะธะฝััััะผะตะฝัั
- **ะะธะฑะบัั ะฝะฐัััะพะนะบั** ะฟะฐัะฐะผะตััะพะฒ ะฟะพะด ะบะพะฝะบัะตัะฝัะต ะทะฐะดะฐัะธ
- **ะญััะตะบัะธะฒะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต** ัะธััะตะผะฝัั ัะตััััะพะฒ

ะัะต ะบะพะผะฟะพะฝะตะฝัั ะฟัะพัะตััะธัะพะฒะฐะฝั ะธ ัะฐะฑะพัะฐัั ะบะพััะตะบัะฝะพ. ะกะธััะตะผะฐ ะณะพัะพะฒะฐ ะบ production ะธัะฟะพะปัะทะพะฒะฐะฝะธั.

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะตััััั

- [LOCAL_MODELS_INTEGRATION_README.md](LOCAL_MODELS_INTEGRATION_README.md) - ะะพะดัะพะฑะฝะพะต ััะบะพะฒะพะดััะฒะพ
- [ะกะบัะธะฟัั ะทะฐะฟััะบะฐ](scripts/) - ะะฒัะพะผะฐัะธะทะฐัะธั ะทะฐะฟััะบะฐ ัะตัะฒะธัะพะฒ
- [Docker ะบะพะฝัะธะณััะฐัะธั](docker-compose.yaml) - ะะฑะฝะพะฒะปะตะฝะฝะฐั ะบะพะฝัะธะณััะฐัะธั

---
**ะะฐัะฐ ะทะฐะฒะตััะตะฝะธั**: 31 ะฐะฒะณัััะฐ 2025  
**ะกัะฐััั**: โ ะะฐะฒะตััะตะฝะพ ััะฟะตัะฝะพ  
**ะขะตััะธัะพะฒะฐะฝะธะต**: โ ะัะพะนะดะตะฝะพ  
**ะะพัะพะฒะฝะพััั ะบ production**: โ ะะฐ
