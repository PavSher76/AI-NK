# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–∞–±–æ—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã"

## üìã –¶–µ–ª—å –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã" –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö.

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

**‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- `ai-nk-frontend-1` - ‚úÖ –ó–∞–ø—É—â–µ–Ω (healthy)
- `ai-nk-gateway-1` - ‚úÖ –ó–∞–ø—É—â–µ–Ω
- `ai-nk-rag-service-1` - ‚úÖ –ó–∞–ø—É—â–µ–Ω
- `ai-nk-document-parser-1` - ‚úÖ –ó–∞–ø—É—â–µ–Ω

### 2. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

**‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–µ–Ω:**
```bash
curl -k -I https://localhost
HTTP/1.1 200 OK
Server: nginx/1.29.1
Content-Type: text/html
```

### 3. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

**‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/v1/documents` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
```bash
curl -k -H "Authorization: Bearer test-token" https://localhost:8443/api/v1/documents | jq '.documents | length'
16
```

**‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/v1/documents/stats` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
```bash
curl -k -H "Authorization: Bearer test-token" https://localhost:8443/api/v1/documents/stats | jq '.statistics'
{
  "total_documents": 16,
  "indexed_documents": 16,
  "indexing_progress_percent": 100,
  "categories": [
    {
      "category": "–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã",
      "count": 16
    }
  ]
}
```

### 4. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –≤ Gateway

**‚úÖ Gateway –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã:**
- –ó–∞–ø—Ä–æ—Å—ã –∫ `/api/v1/documents/*` ‚Üí `rag-service:8003` ‚úÖ
- –ó–∞–ø—Ä–æ—Å—ã –∫ `/api/v1/checkable-documents/*` ‚Üí `document-parser:8001` ‚úÖ

**–õ–æ–≥–∏ Gateway –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é:**
```
INFO:httpx:HTTP Request: GET http://rag-service:8003/documents "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://rag-service:8003/documents/stats "HTTP/1.1 200 OK"
```

### 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ RAG —Å–µ—Ä–≤–∏—Å–µ

**‚úÖ RAG —Å–µ—Ä–≤–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã:**

**–õ–æ–≥–∏ RAG —Å–µ—Ä–≤–∏—Å–∞:**
```
2025-08-28 09:12:14,651 - main - INFO - ‚úÖ [GET_DOCUMENTS] Retrieved 16 documents
2025-08-28 09:12:14,651 - main - INFO - ‚úÖ [GET_DOCUMENTS] Documents list retrieved: 16 documents
2025-08-28 09:12:22,812 - main - INFO - ‚úÖ [GET_DOCUMENTS_STATS] Documents statistics retrieved: {'statistics': {'total_documents': 16, 'indexed_documents': 16, 'indexing_progress_percent': 100, 'categories': [{'category': '–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã', 'count': 16}]}}
```

### 6. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

**‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API:**

**–õ–æ–≥–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (Nginx):**
```
192.168.65.1 - - [28/Aug/2025:09:11:28 +0300] "GET /api/documents HTTP/1.1" 200 4371
192.168.65.1 - - [28/Aug/2025:09:11:28 +0300] "GET /api/documents/stats HTTP/1.1" 200 159
```

### 7. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**‚úÖ –î–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:**

#### –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
```json
{
  "documents": [
    {
      "id": 11,
      "title": "–ì–û–°–¢ 21.201-2011",
      "chunks_count": 12,
      "first_page": 1,
      "last_page": 1,
      "chunk_types": ["text"],
      "status": "indexed"
    }
  ]
}
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
```json
{
  "statistics": {
    "total_documents": 16,
    "indexed_documents": 16,
    "indexing_progress_percent": 100,
    "categories": [
      {
        "category": "–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã",
        "count": 16
      }
    ]
  }
}
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤:
1. **–§—Ä–æ–Ω—Ç–µ–Ω–¥** ‚Üí `https://localhost/api/documents`
2. **Nginx** ‚Üí `https://localhost:8443/api/v1/documents`
3. **Gateway** ‚Üí `http://rag-service:8003/documents`
4. **RAG Service** ‚Üí PostgreSQL (—Ç–∞–±–ª–∏—Ü–∞ `normative_chunks`)

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
- **–í—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** 16
- **–í—Å–µ–≥–æ —á–∞–Ω–∫–æ–≤:** 463
- **–¢–∏–ø—ã —á–∞–Ω–∫–æ–≤:** text (344), figure (69), table (50)
- **–°—Ç–∞—Ç—É—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏:** 100%

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

### RAG —Å–µ—Ä–≤–∏—Å:
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL:** ‚úÖ
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Qdrant:** ‚úÖ
- **–ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤:** BGE-M3 (–∑–∞–≥—Ä—É–∂–µ–Ω–∞)
- **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏:** ~6.15 —Å–µ–∫—É–Ω–¥

### Gateway:
- **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:** ‚úÖ
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** ‚úÖ (test-token —Ä–∞–±–æ—Ç–∞–µ—Ç)
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:** ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∫ rag-service)

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!**

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `https://localhost`
- ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ Gateway –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ RAG —Å–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 16 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (16 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, 100% –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è)
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞:
–ò–∑–Ω–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Å–ø–∏—Å–∫–∞ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞. –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –º–æ–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å:
- –°–ø–∏—Å–æ–∫ –∏–∑ 16 –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤, —Ç–∏–ø—ã —á–∞–Ω–∫–æ–≤, —Å—Ç–∞—Ç—É—Å)

---

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 28.08.2025  
**–í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏:** ~10 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
