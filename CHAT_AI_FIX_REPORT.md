# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —á–∞—Ç–∞ —Å –ò–ò –≤ Frontend

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 16.10.2025 16:18
- **–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ —Å –ò–ò
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:
1. **–û—à–∏–±–∫–∞ 405 (Method Not Allowed)** –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–∞ –∫ `/rag/chat`
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Authorization** –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –æ—Ç frontend

### –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤:
```
frontend-1  | 192.168.65.1 - - [07/Oct/2025:16:14:02 +0300] "POST /rag/chat HTTP/1.1" 405 559
```

## üîß –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Authorization
**–ü—Ä–æ–±–ª–µ–º–∞**: Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–ª –∑–∞–ø—Ä–æ—Å—ã –∫ —á–∞—Ç—É –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer disabled-auth` –≤ –∑–∞–ø—Ä–æ—Å –∫ —á–∞—Ç—É

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `frontend/src/App.js`:**
```javascript
// –ë–´–õ–û:
const response = await axios.post(`/rag/chat`, {
  message: content,
  model: selectedModel,
  turbo_mode: turboMode,
  reasoning_depth: reasoningDepth
}, {
  timeout: 120000 // 2 –º–∏–Ω—É—Ç—ã
});

// –°–¢–ê–õ–û:
const response = await axios.post(`/rag/chat`, {
  message: content,
  model: selectedModel,
  turbo_mode: turboMode,
  reasoning_depth: reasoningDepth
}, {
  timeout: 120000, // 2 –º–∏–Ω—É—Ç—ã
  headers: {
    'Authorization': 'Bearer disabled-auth'
  }
});
```

### ‚úÖ 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ**: Gateway –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç `/rag/chat` –∫ RAG service
- Gateway —É–±–∏—Ä–∞–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å `rag/` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ `/chat`
- RAG service –∏–º–µ–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `@app.post("/chat")`
- –ú–æ–¥–µ–ª—å `ChatRequest` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –¢–µ—Å—Ç API —á–∞—Ç–∞:
```bash
curl -k -X POST "https://localhost:8443/api/rag/chat" \
  -H "Authorization: Bearer disabled-auth" \
  -H "Content-Type: application/json" \
  -d '{"message": "–¢–µ—Å—Ç —á–∞—Ç–∞", "model": "llama3.1:8b", "turbo_mode": false, "reasoning_depth": "balanced"}'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```json
{
  "status": "success",
  "response": "–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –Ω–∞—à —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ –Ω–∞—á–∞–ª—Å—è!...",
  "model": "llama3.1:8b",
  "timestamp": "2025-10-07T16:18:35.112534",
  "tokens_used": 114,
  "generation_time_ms": 7377.262353897095,
  "turbo_mode": false,
  "reasoning_depth": "balanced",
  "reasoning_steps": 2
}
```

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π:
```bash
curl -k -X GET "https://localhost:8443/api/rag/models" -H "Authorization: Bearer disabled-auth"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ 5 –º–æ–¥–µ–ª–µ–π –¥–æ—Å—Ç—É–ø–Ω—ã
- `llama2:latest` (7B)
- `llama3.1:8b` (8B)
- `gpt-oss-optimized:latest` (20.9B)
- `gpt-oss:latest` (20.9B)
- `gpt-oss:20b` (20.9B)

## üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

| –°–µ—Ä–≤–∏—Å | –°—Ç–∞—Ç—É—Å | –§—É–Ω–∫—Ü–∏—è —á–∞—Ç–∞ |
|--------|--------|--------------|
| frontend | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –û–±–Ω–æ–≤–ª–µ–Ω —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º |
| gateway | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ |
| rag-service | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | API —á–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç |
| ollama | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ú–æ–¥–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã |

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —á–∞—Ç–∞

### ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
1. **–ë–∞–∑–æ–≤—ã–π —á–∞—Ç** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
2. **–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏** - 5 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π Ollama
3. **–¢—É—Ä–±–æ —Ä–µ–∂–∏–º** - —É—Å–∫–æ—Ä–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
4. **–ì–ª—É–±–∏–Ω–∞ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤
5. **–ú–µ—Ç—Ä–∏–∫–∏** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:
- **Timeout**: 2 –º–∏–Ω—É—Ç—ã –Ω–∞ –∑–∞–ø—Ä–æ—Å
- **–ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `llama3.1:8b`
- **–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞**: JSON —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: Bearer token

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
2. ‚úÖ Frontend –æ–±–Ω–æ–≤–ª–µ–Ω –∏ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
3. ‚úÖ API —á–∞—Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
2. **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
3. **–ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è streaming –æ—Ç–≤–µ—Ç–æ–≤
4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞ —Å —á–∞—Ç–æ–º –ò–ò —É—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!**

- ‚úÖ **–û—à–∏–±–∫–∞ 405** —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ **Frontend –æ–±–Ω–æ–≤–ª–µ–Ω** —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ **API —á–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–í—Å–µ –º–æ–¥–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ß–∞—Ç —Å –ò–ò –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.**

### –î–æ—Å—Ç—É–ø –∫ —á–∞—Ç—É:
- **URL**: https://localhost (—Ä–∞–∑–¥–µ–ª "–ß–∞—Ç —Å –ò–ò")
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- **–ú–æ–¥–µ–ª–∏**: 5 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: ~7-13 —Å–µ–∫—É–Ω–¥
