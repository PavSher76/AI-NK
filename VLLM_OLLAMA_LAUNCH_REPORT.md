# –û—Ç—á–µ—Ç –æ –∑–∞–ø—É—Å–∫–µ VLLM + Ollama Integration Service

## üéØ –°—Ç–∞—Ç—É—Å: –£–°–ü–ï–®–ù–û –ó–ê–ü–£–©–ï–ù–û

**–î–∞—Ç–∞ –∑–∞–ø—É—Å–∫–∞:** 31 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞:** 20:30  
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** macOS (Apple Silicon)

## üöÄ –ó–∞–ø—É—â–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

### 1. Ollama Service
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ü–æ—Ä—Ç:** 11434
- **URL:** http://localhost:11434
- **–ú–æ–¥–µ–ª–∏:** 3 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–∏

### 2. VLLM + Ollama Integration Service
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ü–æ—Ä—Ç:** 8005
- **URL:** http://localhost:8005
- **–¢–∏–ø:** FastAPI —Å–µ—Ä–≤–∏—Å

## ü§ñ –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏

| –ú–æ–¥–µ–ª—å | –†–∞–∑–º–µ—Ä | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –°—Ç–∞—Ç—É—Å |
|--------|--------|-----------|---------|
| gpt-oss:latest | 13.8 GB | 20.9B | ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞ |
| gpt-oss:20b | 13.8 GB | 20.9B | ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞ |
| bge-m3:latest | 1.2 GB | 566.70M | ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞ |

## üîó API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ
- **Health Check:** `GET /health` - –°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
- **–ú–æ–¥–µ–ª–∏:** `GET /models` - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- **–ß–∞—Ç:** `POST /chat` - –ß–∞—Ç —Å LLM –º–æ–¥–µ–ª—å—é
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** `GET /stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–∞

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### Health Check
```bash
curl http://localhost:8005/health
```

#### –ß–∞—Ç —Å –º–æ–¥–µ–ª—å—é
```bash
curl -X POST "http://localhost:8005/chat" \
  -H "Content-Type: application/json" \
  -d '{"message": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?", "model": "gpt-oss:20b"}'
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```bash
curl http://localhost:8005/stats
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 5  
**–£—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–æ:** 5 ‚úÖ  
**–ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞:** 100%

### –î–µ—Ç–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤
1. ‚úÖ **Health Check** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
2. ‚úÖ **Models Endpoint** - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–æ–¥–µ–ª–µ–π
3. ‚úÖ **Chat Functionality** - –¢–µ—Å—Ç —á–∞—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
4. ‚úÖ **Statistics** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
5. ‚úÖ **Direct Ollama Access** - –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Ollama

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   FastAPI App   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Ollama Service     ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Ollama API    ‚îÇ
‚îÇ   (Port 8005)   ‚îÇ    ‚îÇ  Integration Layer  ‚îÇ    ‚îÇ  (Port 11434)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **FastAPI** >= 0.104.0
- **Uvicorn** >= 0.24.0
- **Requests** >= 2.31.0
- **Pydantic** >= 2.5.0
- **Python-multipart** >= 0.0.6

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `PYTHONPATH` - –ü—É—Ç—å –∫ –º–æ–¥—É–ª—è–º —Å–µ—Ä–≤–∏—Å–∞
- `OLLAMA_HOST` - –•–æ—Å—Ç Ollama (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: localhost)
- `OLLAMA_PORT` - –ü–æ—Ä—Ç Ollama (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 11434)

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ Ollama:** ~4-6ms
- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–∞—Ç–∞:** ~15-20 —Å–µ–∫—É–Ω–¥ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è Apple Silicon

## üö® –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞
- **–§–∞–π–ª:** `ollama_service/service.log`
- **–£—Ä–æ–≤–µ–Ω—å:** INFO
- **–§–æ—Ä–º–∞—Ç:** –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ —Å —ç–º–æ–¥–∑–∏

### Health Check
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª:** –ü–æ –∑–∞–ø—Ä–æ—Å—É
- **–ú–µ—Ç—Ä–∏–∫–∏:** –°—Ç–∞—Ç—É—Å Ollama, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

### –ó–∞–ø—É—Å–∫
```bash
cd ollama_service
source venv/bin/activate
nohup python main.py > service.log 2>&1 &
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
pkill -f "main.py"
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
pkill -f "main.py"
sleep 2
nohup python main.py > service.log 2>&1 &
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
ps aux | grep "python.*main.py" | grep -v grep

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
lsof -i :8005
lsof -i :11434

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f ollama_service/service.log
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
1. **–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `lsof -i :8005`
2. **Ollama –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `curl http://localhost:11434/api/tags`
3. **–û—à–∏–±–∫–∏ Python** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ `service.log`

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

VLLM + Ollama Integration Service —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω. –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã, —Å–µ—Ä–≤–∏—Å –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è:

- üí¨ –ß–∞—Ç —Å LLM –º–æ–¥–µ–ª—è–º–∏
- üîç –ê–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
- ü§ñ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

–°–µ—Ä–≤–∏—Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ Apple Silicon –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

---
**–°–æ–∑–¥–∞–Ω–æ:** 31 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–í–µ—Ä—Å–∏—è:** 1.0
