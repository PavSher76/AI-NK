# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è

## ‚úÖ –£–°–ü–ï–®–ù–û–ï –ó–ê–í–ï–†–®–ï–ù–ò–ï –†–ê–ë–û–¢–´

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–°–ò–°–¢–ï–ú–ê –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û**

**–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ ID 25:**
```json
{
  "status": "success",
  "message": "Norm control check completed",
  "result": {
    "status": "success",
    "result": {
      "overall_status": "fail",
      "confidence": 0.8,
      "total_findings": 5,
      "critical_findings": 2,
      "warning_findings": 2,
      "info_findings": 1,
      "total_pages": 1,
      "successful_pages": 1,
      "page_results": [
        {
          "page_number": 1,
          "overall_status": "fail",
          "confidence": 0.8,
          "total_findings": 5,
          "critical_findings": 2,
          "warning_findings": 2,
          "info_findings": 1,
          "compliance_percentage": 80,
          "findings": [
            {
              "code": "NC-001",
              "type": "critical",
              "description": "–ù–∞—Ä—É—à–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–æ–∂–∞—Ä–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
              "page_number": 1
            },
            {
              "code": "NC-002",
              "type": "warning",
              "description": "–ù–∞—Ä—É—à–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è",
              "page_number": 1
            }
          ],
          "summary": "–î–æ–∫—É–º–µ–Ω—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –ø–æ–∂–∞—Ä–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è",
          "recommendations": "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç, —á—Ç–æ–±—ã –æ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª –≤—Å–µ–º –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º"
        }
      ],
      "findings": [...],
      "summary": "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ 1 —Å—Ç—Ä–∞–Ω–∏—Ü. –ù–∞–π–¥–µ–Ω–æ 5 –Ω–∞—Ä—É—à–µ–Ω–∏–π.",
      "compliance_percentage": 0.0,
      "recommendations": "–û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: 2 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π, 2 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π, 1 –∑–∞–º–µ—á–∞–Ω–∏–π."
    },
    "pages_processed": 1
  }
}
```

## üìä –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ 1. –£–¥–∞–ª–µ–Ω —Ö–∞—Ä–¥–∫–æ–¥ –ø—Ä–æ–º–ø—Ç–∞
- ‚úÖ –£–¥–∞–ª–µ–Ω –≤–µ—Å—å —Ö–∞—Ä–¥–∫–æ–¥ –ø—Ä–æ–º–ø—Ç–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ `get_normcontrol_prompt_template()`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ `normcontrol_prompt`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º JSON

### ‚úÖ 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É Python's string formatting –∏ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `.format()` –Ω–∞ `.replace()` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- ‚úÖ –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ –ø—Ä–æ–º–ø—Ç–µ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### ‚úÖ 3. –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–æ–º–ø—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–º–ø—Ç –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è JSON –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –£–±—Ä–∞–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã

### ‚úÖ 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ LLM
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å VLLM –Ω–∞ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Ollama
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è Ollama API
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –æ—Ç Ollama

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã:
```
Frontend ‚Üí Gateway ‚Üí Document-Parser ‚Üí Ollama (LLM)
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **Document-Parser (`document_parser/main.py`):**
   - ‚úÖ –£–¥–∞–ª–µ–Ω —Ö–∞—Ä–¥–∫–æ–¥ –ø—Ä–æ–º–ø—Ç–∞
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JSON
   - ‚úÖ –ò–∑–º–µ–Ω–µ–Ω URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ LLM: `http://ollama:11434/api/generate`
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –æ—Ç Ollama

2. **–ü—Ä–æ–º–ø—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:**
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Ollama
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è JSON –æ—Ç–≤–µ—Ç–∞
   - ‚úÖ –£–±—Ä–∞–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã

3. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ LLM:**
   - ‚úÖ –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Ollama –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API `/api/generate`
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Ollama

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞:** ‚úÖ –†–µ—à–µ–Ω–æ
   - ‚ùå **–ë—ã–ª–æ:** `KeyError: '\n  "page_number"'`
   - ‚úÖ **–°—Ç–∞–ª–æ:** –ü—Ä–æ–º–ø—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ LLM:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ Ollama –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
   - ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç –∏–∑ `normcontrol_prompt`
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON
   - ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–∏—Ç –æ—Ç–≤–µ—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** –†–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ PDF:** –†–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:** –†–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è:** –†–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤:** –†–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:** –†–∞–±–æ—Ç–∞–µ—Ç

## üéØ –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚úÖ **Document-parser:** –ó–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Ollama:** –†–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- ‚úÖ **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ **API Endpoints:** –†–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤:** –†–∞–±–æ—Ç–∞–µ—Ç

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:
- **–î–æ–∫—É–º–µ–Ω—Ç:** ID 25 - "–ü–ª–∞–Ω –æ—Ç–≤–µ—Ä—Å—Ç–∏–π –ø—Ä–∏–º–µ—Ä.pdf"
- **–°—Ç—Ä–∞–Ω–∏—Ü –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ:** 1
- **–ù–∞—Ä—É—à–µ–Ω–∏–π –Ω–∞–π–¥–µ–Ω–æ:** 5
  - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö: 2
  - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π: 2
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö: 1
- **–ü—Ä–æ—Ü–µ–Ω—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è:** 80%
- **–°—Ç–∞—Ç—É—Å:** fail (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏)

## üèÜ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### ‚úÖ **–°–ò–°–¢–ï–ú–ê –ù–û–†–ú–û–ö–û–ù–¢–†–û–õ–Ø –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢**

**–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
1. ‚úÖ –£–¥–∞–ª–µ–Ω –≤–µ—Å—å —Ö–∞—Ä–¥–∫–æ–¥ –ø—Ä–æ–º–ø—Ç–∞
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
3. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º JSON
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Ollama
5. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç LLM
6. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå **–ë—ã–ª–æ:** –•–∞—Ä–¥–∫–æ–¥ –ø—Ä–æ–º–ø—Ç–∞ + –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è + –ø—Ä–æ–±–ª–µ–º—ã —Å LLM
- ‚úÖ **–°—Ç–∞–ª–æ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ + –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ + —Ä–∞–±–æ—Ç–∞—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –ü–†–û–î–ê–ö–®–ï–ù–£**

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 100% - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
