# =============================================================================
# AI-NK Конфигурация для MacBook Pro M3 Pro (18GB RAM)
# =============================================================================

# Основные настройки портов
KEYCLOAK_PORT=8081
GATEWAY_PORT=8443
FRONTEND_PORT=443
OLLAMA_PORT=11434
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
POSTGRES_PORT=5432
QDANT_PORT=6333

# Настройки базы данных
POSTGRES_DB=norms_db
POSTGRES_USER=norms_user
POSTGRES_PASSWORD=norms_password

# Настройки Redis
REDIS_PASSWORD=redispass

# Настройки Keycloak
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# Настройки Grafana
GRAFANA_ADMIN_PASSWORD=admin

# =============================================================================
# ОПТИМИЗАЦИЯ ДЛЯ M3 PRO (18GB RAM)
# =============================================================================

# Настройки для Ollama (оптимизировано для M3 Pro)
# Рекомендуется llama3.1:8b для стабильной работы
OLLAMA_MODEL=llama3.1:8b
OLLAMA_GPU_LAYERS=35
OLLAMA_CPU_THREADS=10
OLLAMA_BATCH_SIZE=512

# Настройки памяти для контейнеров (оптимизировано для 18GB RAM)
# Оставляем запас для системы и других приложений
OLLAMA_MEMORY_LIMIT=10G
OLLAMA_MEMORY_RESERVATION=8G

VLLM_MEMORY_LIMIT=2G
VLLM_MEMORY_RESERVATION=1G

GATEWAY_MEMORY_LIMIT=1G
GATEWAY_MEMORY_RESERVATION=512M

POSTGRES_MEMORY_LIMIT=1.5G
POSTGRES_MEMORY_RESERVATION=1G

QDANT_MEMORY_LIMIT=1.5G
QDANT_MEMORY_RESERVATION=1G

DOCUMENT_PARSER_MEMORY_LIMIT=1.5G
DOCUMENT_PARSER_MEMORY_RESERVATION=1G

RULE_ENGINE_MEMORY_LIMIT=1.5G
RULE_ENGINE_MEMORY_RESERVATION=1G

RAG_SERVICE_MEMORY_LIMIT=1G
RAG_SERVICE_MEMORY_RESERVATION=512M

# Настройки производительности для M3 Pro
DOCKER_COMPOSE_PARALLEL=4
DOCKER_BUILDKIT=1

# Настройки для разработки
NODE_ENV=development
PYTHONUNBUFFERED=1

# Настройки логирования
LOG_LEVEL=INFO

# Дополнительные настройки для M3 Pro
OLLAMA_CONTEXT_SIZE=4096
OLLAMA_ROPE_FREQ_BASE=10000
OLLAMA_ROPE_FREQ_SCALE=0.5
OLLAMA_REPEAT_PENALTY=1.1
OLLAMA_TOP_P=0.9
OLLAMA_TOP_K=40

# Оптимизация для Apple Silicon
DOCKER_DEFAULT_PLATFORM=linux/arm64
