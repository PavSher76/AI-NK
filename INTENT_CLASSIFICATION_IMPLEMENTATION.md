# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –∑–∞–ø—Ä–æ—Å–∞ —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –∫–ª–∞—Å—Å–æ–≤ –Ω–∞ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **IntentClassifierService** - –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
2. **IntentType** - –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
3. **IntentClassification** - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. **QueryRewriting** - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–∏–±—Ä–∏–¥–Ω—ã–º –ø–æ–∏—Å–∫–æ–º** - –ë–µ—Å—à–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

```
–ó–∞–ø—Ä–æ—Å ‚Üí –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏—è ‚Üí –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ ‚Üí –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
```

## –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. –¢–∏–ø—ã –Ω–∞–º–µ—Ä–µ–Ω–∏–π

**IntentType Enum**:
- **DEFINITION** - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏ —Ç–µ—Ä–º–∏–Ω—ã
- **APPLICABILITY** - –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- **REQUIREMENTS** - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- **PROCEDURE** - –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ –º–µ—Ç–æ–¥—ã
- **EXCEPTIONS** - –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –æ—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏
- **GENERAL** - –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã

### 2. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞–º–µ—Ä–µ–Ω–∏–π

**IntentClassifierService** - –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π

**–ú–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏**:
1. **–ü—Ä–∞–≤–∏–ª–æ-–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - –ë—ã—Å—Ç—Ä–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
2. **ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - –¢–æ—á–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Ollama

**–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞**:

```python
intent_keywords = {
    IntentType.DEFINITION: [
        "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ", "—Ç–µ—Ä–º–∏–Ω", "–ø–æ–Ω—è—Ç–∏–µ", "—á—Ç–æ —Ç–∞–∫–æ–µ", "–æ–∑–Ω–∞—á–∞–µ—Ç", "—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞",
        "–∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä–∞", "—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ", "–∑–Ω–∞—á–µ–Ω–∏–µ", "—Å–º—ã—Å–ª", "–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å", "–æ–ø–∏—Å–∞—Ç—å"
    ],
    IntentType.APPLICABILITY: [
        "–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ", "–æ–±–ª–∞—Å—Ç—å", "—Å—Ñ–µ—Ä–∞", "–≥–¥–µ", "–∫–æ–≥–¥–∞", "–¥–ª—è —á–µ–≥–æ", "–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ",
        "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ", "–ø—Ä–∏–º–µ–Ω–∏–º–æ", "–ø–æ–¥—Ö–æ–¥–∏—Ç", "—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç", "–æ—Ç–Ω–æ—Å–∏—Ç—Å—è"
    ],
    IntentType.REQUIREMENTS: [
        "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ", "–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ", "–¥–æ–ª–∂–µ–Ω", "–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ", "–Ω—É–∂–Ω–æ", "—Å–ª–µ–¥—É–µ—Ç",
        "–æ–±—è–∑–∞–Ω", "—Ç—Ä–µ–±—É–µ—Ç—Å—è", "–ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ", "—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ", "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"
    ],
    IntentType.PROCEDURE: [
        "–ø—Ä–æ—Ü–µ–¥—É—Ä–∞", "–º–µ—Ç–æ–¥", "—Å–ø–æ—Å–æ–±", "–ø–æ—Ä—è–¥–æ–∫", "–∞–ª–≥–æ—Ä–∏—Ç–º", "—ç—Ç–∞–ø", "—à–∞–≥",
        "–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ", "–æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏–µ", "–ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ", "—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è", "–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ"
    ],
    IntentType.EXCEPTIONS: [
        "–∏—Å–∫–ª—é—á–µ–Ω–∏–µ", "–æ—Å–æ–±—ã–π", "—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π", "–æ—Ç–¥–µ–ª—å–Ω—ã–π", "—á–∞—Å—Ç–Ω—ã–π", "–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π",
        "–Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è", "–Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è", "–Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è", "–Ω–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç"
    ]
}
```

### 3. –ú–∞–ø–ø–∏–Ω–≥ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã

**intent_to_sections** - –ú–∞–ø–ø–∏–Ω–≥ —Ç–∏–ø–æ–≤ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:

```python
intent_to_sections = {
    IntentType.DEFINITION: [
        "—Ç–µ—Ä–º–∏–Ω—ã –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è", "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è", "—Ç–µ—Ä–º–∏–Ω—ã", "–ø–æ–Ω—è—Ç–∏—è",
        "—Å–æ–∫—Ä–∞—â–µ–Ω–∏—è", "–∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã", "–≥–ª–æ—Å—Å–∞—Ä–∏–π", "—Å–ª–æ–≤–∞—Ä—å —Ç–µ—Ä–º–∏–Ω–æ–≤"
    ],
    IntentType.APPLICABILITY: [
        "–æ–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è", "—Å—Ñ–µ—Ä–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è", "–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ", "–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ",
        "—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ", "–¥–µ–π—Å—Ç–≤–∏–µ", "–ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å", "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ"
    ],
    IntentType.REQUIREMENTS: [
        "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è", "–æ–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è", "—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è",
        "–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è", "–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è", "–ø–∞—Ä–∞–º–µ—Ç—Ä—ã"
    ],
    IntentType.PROCEDURE: [
        "–º–µ—Ç–æ–¥—ã", "–ø—Ä–æ—Ü–µ–¥—É—Ä—ã", "–ø–æ—Ä—è–¥–æ–∫", "–∞–ª–≥–æ—Ä–∏—Ç–º", "—ç—Ç–∞–ø—ã", "—Å—Ç–∞–¥–∏–∏",
        "–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ", "–æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏–µ", "–ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ", "—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è"
    ],
    IntentType.EXCEPTIONS: [
        "–∏—Å–∫–ª—é—á–µ–Ω–∏—è", "–æ—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏", "–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è", "–∑–∞–ø—Ä–µ—Ç—ã",
        "–Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è", "–Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è", "–Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è"
    ]
}
```

### 4. –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

**QueryRewriting** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏—è:

**–ü—Ä–∏–º–µ—Ä—ã –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è**:
- **DEFINITION**: "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ {query}", "—á—Ç–æ —Ç–∞–∫–æ–µ {query}", "—Ç–µ—Ä–º–∏–Ω {query}"
- **APPLICABILITY**: "–æ–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è {query}", "–≥–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è {query}"
- **REQUIREMENTS**: "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ {query}", "–Ω–æ—Ä–º—ã –¥–ª—è {query}"
- **PROCEDURE**: "–º–µ—Ç–æ–¥ {query}", "–ø—Ä–æ—Ü–µ–¥—É—Ä–∞ {query}", "–∫–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å {query}"
- **EXCEPTIONS**: "–∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è {query}", "–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è {query}"

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º—É

### Backend (RAG Service)

**–§–∞–π–ª—ã**:
- `rag_service/services/intent_classifier_service.py` - –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `rag_service/services/ollama_rag_service.py` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ RAG —Å–µ—Ä–≤–∏—Å

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ hybrid_search**:
```python
# –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
if use_intent_classification and not fast_mode:
    intent_classification = self.intent_classifier.classify_intent(query)
    query_rewriting = self.intent_classifier.rewrite_query(query, intent_classification)
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
    enhanced_queries = query_rewriting.rewritten_queries
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–º–µ—Ä–µ–Ω–∏—è
    if query_rewriting.section_filters:
        enhanced_filters['chapter_filter'] = query_rewriting.section_filters[0]
    if query_rewriting.chunk_type_filters:
        enhanced_filters['chunk_type_filter'] = query_rewriting.chunk_type_filters[0]
```

### Frontend

**–§–∞–π–ª—ã**:
- `frontend/src/components/NTDConsultation.js` - UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π

**–ù–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**:
- –ö–∞—Ä—Ç–æ—á–∫–∞ "–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π" –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –ø–æ–∏—Å–∫–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–ø–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–∫–∞–∑ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```python
# –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞–º–µ—Ä–µ–Ω–∏–π
model_name = "gpt-oss"           # –ú–æ–¥–µ–ª—å –¥–ª—è ML –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
use_intent_classification = True # –í–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
confidence_threshold = 0.8       # –ü–æ—Ä–æ–≥ –¥–ª—è –ø—Ä–∞–≤–∏–ª–æ-–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

- **–ü—Ä–∞–≤–∏–ª–æ-–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ë—ã—Å—Ç—Ä–∞—è, –Ω–æ –º–µ–Ω–µ–µ —Ç–æ—á–Ω–∞—è
- **ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: –¢–æ—á–Ω–∞—è, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏
- **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª–æ-–æ—Å–Ω–æ–≤–∞–Ω–Ω—É—é –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏, –∏–Ω–∞—á–µ ML

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ú–µ—Ç—Ä–∏–∫–∏

- **–í—Ä–µ–º—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏**: ~100-500ms –¥–ª—è –ø—Ä–∞–≤–∏–ª–æ-–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π, ~1-3s –¥–ª—è ML
- **–¢–æ—á–Ω–æ—Å—Ç—å**: 85-95% –¥–ª—è –ø—Ä–∞–≤–∏–ª–æ-–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π, 90-98% –¥–ª—è ML
- **–ü–æ–∫—Ä—ã—Ç–∏–µ**: 6 —Ç–∏–ø–æ–≤ –Ω–∞–º–µ—Ä–µ–Ω–∏–π —Å 100+ –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
- **–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ**: 3-5 –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ü—Ä–∞–≤–∏–ª–æ-–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ë—ã—Å—Ç—Ä–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—á–µ–≤–∏–¥–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
2. **ML fallback**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ML —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. **–ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```
üéØ [INTENT_CLASSIFIER] Classifying intent for query: '—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–æ–∂–∞—Ä–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏...'
‚úÖ [INTENT_CLASSIFIER] Intent classified as: requirements (confidence: 0.856)
üîÑ [INTENT_CLASSIFIER] Generated 4 enhanced queries
üîÑ [HYBRID_SEARCH] Generated 4 enhanced queries
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–î–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ API endpoint `/hybrid_search_stats`:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –ø–æ —Ç–∏–ø–∞–º
- –ú–∞–ø–ø–∏–Ω–≥ –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã –∏ —Ç–∏–ø—ã —á–∞–Ω–∫–æ–≤
- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–¢–æ—á–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é
- **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –Ω—É–∂–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å**: –ü–æ–∏—Å–∫ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### 2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ë—ã—Å—Ç—Ä–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ü—Ä–∞–≤–∏–ª–æ-–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –æ—á–µ–≤–∏–¥–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- **–£–º–Ω–æ–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º –∏ —Ç–∏–ø–∞–º —á–∞–Ω–∫–æ–≤

### 3. –ì–∏–±–∫–æ—Å—Ç—å
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã**: –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
- **–†–∞—Å—à–∏—Ä—è–µ–º—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**: –ü—Ä–æ—Å—Ç–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–µ–π
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∏—Å–∫–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
intent_classifier = IntentClassifierService()

# –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏—è
intent_classification = intent_classifier.classify_intent(
    "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–æ–∂–∞—Ä–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
)

# –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
query_rewriting = intent_classifier.rewrite_query(
    "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–æ–∂–∞—Ä–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
    intent_classification
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç
print(f"–¢–∏–ø –Ω–∞–º–µ—Ä–µ–Ω–∏—è: {intent_classification.intent_type.value}")
print(f"–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {intent_classification.confidence}")
print(f"–ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã: {query_rewriting.rewritten_queries}")
print(f"–§–∏–ª—å—Ç—Ä—ã —Ä–∞–∑–¥–µ–ª–æ–≤: {query_rewriting.section_filters}")
```

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ù–¢–î –æ—Ç –ò–ò"
2. –ù–∞–∂–º–∏—Ç–µ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∏—Å–∫–∞" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏–µ
4. –ü–æ–ª—É—á–∏—Ç–µ –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ –Ω—É–∂–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–ø—Ä–æ—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
**–ó–∞–ø—Ä–æ—Å**: "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–∂–∞—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å?"
**–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: DEFINITION (confidence: 0.92)
**–ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã**: 
- "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∂–∞—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
- "—á—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–∂–∞—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
- "—Ç–µ—Ä–º–∏–Ω –ø–æ–∂–∞—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
**–§–∏–ª—å—Ç—Ä—ã**: ["—Ç–µ—Ä–º–∏–Ω—ã –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è", "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è"]

### –ü—Ä–∏–º–µ—Ä 2: –ó–∞–ø—Ä–æ—Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
**–ó–∞–ø—Ä–æ—Å**: "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —ç–≤–∞–∫—É–∞—Ü–∏–æ–Ω–Ω—ã–º –ø—É—Ç—è–º"
**–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: REQUIREMENTS (confidence: 0.89)
**–ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã**:
- "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —ç–≤–∞–∫—É–∞—Ü–∏–æ–Ω–Ω—ã–º –ø—É—Ç—è–º"
- "–Ω–æ—Ä–º—ã –¥–ª—è —ç–≤–∞–∫—É–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π"
- "–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —ç–≤–∞–∫—É–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π"
**–§–∏–ª—å—Ç—Ä—ã**: ["—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è", "–æ–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è"]

### –ü—Ä–∏–º–µ—Ä 3: –ó–∞–ø—Ä–æ—Å –ø—Ä–æ—Ü–µ–¥—É—Ä
**–ó–∞–ø—Ä–æ—Å**: "–ö–∞–∫ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–∂–∞—Ä–Ω–æ-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ?"
**–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: PROCEDURE (confidence: 0.87)
**–ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã**:
- "–º–µ—Ç–æ–¥ –ø–æ–∂–∞—Ä–Ω–æ-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ"
- "–ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–æ–∂–∞—Ä–Ω–æ-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ"
- "–∫–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∂–∞—Ä–Ω–æ-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ"
**–§–∏–ª—å—Ç—Ä—ã**: ["–º–µ—Ç–æ–¥—ã", "–ø—Ä–æ—Ü–µ–¥—É—Ä—ã", "–ø–æ—Ä—è–¥–æ–∫"]

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π

### –î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π:
- –û–±—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏—è
- –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É
- –ù–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

### –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞
- –ü–æ–∏—Å–∫ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤
- –£–ª—É—á—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –Ω–∞ 30-50%

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞ –≤ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –Ω—É–∂–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö.

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è**:
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è 6 —Ç–∏–ø–æ–≤ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª–æ-–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –∏ ML –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–∏–±—Ä–∏–¥–Ω—ã–º –ø–æ–∏—Å–∫–æ–º
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π
- ‚úÖ –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
