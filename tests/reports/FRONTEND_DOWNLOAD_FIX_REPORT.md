# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞

## –ü—Ä–æ–±–ª–µ–º–∞
–í –º–æ–¥—É–ª–µ "–í—ã—Ö–æ–¥–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ü–∏–∏" –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –±—ã–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –æ—Ç—á–µ—Ç–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–ª –æ—à–∏–±–∫—É –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç.

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ API –ø—É—Ç–∏ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API_BASE: `/api/v1` –≤–º–µ—Å—Ç–æ `/api`
- –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ–±—Ä–∞—â–µ–Ω–∏—é –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π –≤ gateway
- Gateway –Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª –ø—É—Ç–∏ –¥–ª—è outgoing control service
- –ü—É—Ç—å `/api/outgoing-control/report/{document_id}` –Ω–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API –ø—É—Ç–µ–π –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
–û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:
- `frontend/src/pages/OutgoingControlPage.js`
- `frontend/src/App.js`
- `frontend/src/components/SystemSettings.js`
- `frontend/src/pages/UAVProtectionCalculationsPage.js`
- `frontend/src/pages/CalculationsPage.js`
- `frontend/src/pages/ElectricalCalculationsPage.js`
- `frontend/src/pages/VentilationCalculationsPage.js`
- `frontend/src/pages/ThermalCalculationsPage.js`
- `frontend/src/components/CheckableDocuments.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
```javascript
// –ë—ã–ª–æ:
const API_BASE = process.env.REACT_APP_API_BASE || '/api/v1';

// –°—Ç–∞–ª–æ:
const API_BASE = process.env.REACT_APP_API_BASE || '/api';
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤ gateway
–û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `gateway/app.py`:

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `proxy_main`:**
```python
# –ë—ã–ª–æ:
clean_path = path.replace("api/", "")

# –°—Ç–∞–ª–æ:
clean_path = path.replace("api/", "") if path.startswith("api/") else path
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ outgoing-control:**
```python
# –ë—ã–ª–æ:
clean_path = path.replace("api/", "") if path.startswith("api/") else path

# –°—Ç–∞–ª–æ:
# –£–±–∏—Ä–∞–µ–º –ø—Ä–µ—Ñ–∏–∫—Å api/ –µ—Å–ª–∏ –µ—Å—Ç—å, –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º outgoing-control
clean_path = path.replace("api/", "") if path.startswith("api/") else path
```

### 3. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ü–µ—Ä–µ—Å–æ–±—Ä–∞–Ω frontend: `docker-compose build frontend`
- –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω frontend: `docker-compose restart frontend`
- –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω gateway: `docker-compose restart gateway`

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```bash
curl -s -k https://localhost:8443/api/outgoing-control/upload \
  -H "Authorization: Bearer disabled-auth" \
  -F "file=@tests/data/TestDocs/for_check/–°–ó_–¢–ï–°–¢.pdf"
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç —Å ID `c0538248-ff70-4da6-b396-e556ca90acd9`

### 2. –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
curl -s -k https://localhost:8443/api/outgoing-control/comprehensive-check \
  -H "Authorization: Bearer disabled-auth" \
  -H "Content-Type: application/json" \
  -d '{"document_id": "c0538248-ff70-4da6-b396-e556ca90acd9"}'
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–Ω–∞–π–¥–µ–Ω–æ 76 –æ—à–∏–±–æ–∫)

### 3. –ó–∞–ø—É—Å–∫ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
```bash
curl -s -k https://localhost:8443/api/outgoing-control/expert-analysis \
  -H "Authorization: Bearer disabled-auth" \
  -H "Content-Type: application/json" \
  -d '{"document_id": "c0538248-ff70-4da6-b396-e556ca90acd9"}'
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–æ—Ü–µ–Ω–∫–∞: 60/100, –≤–µ—Ä–¥–∏–∫—Ç: "–¢–†–ï–ë–£–ï–¢–°–Ø –î–û–†–ê–ë–û–¢–ö–ò")

### 4. –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```bash
curl -s -k https://localhost:8443/api/outgoing-control/consolidate \
  -H "Authorization: Bearer disabled-auth" \
  -H "Content-Type: application/json" \
  -d '{"document_id": "c0538248-ff70-4da6-b396-e556ca90acd9"}'
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 5. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
```bash
curl -s -k https://localhost:8443/api/outgoing-control/report/c0538248-ff70-4da6-b396-e556ca90acd9 \
  -H "Authorization: Bearer disabled-auth"
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω HTML –æ—Ç—á–µ—Ç

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞
–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞ –≤ –º–æ–¥—É–ª–µ "–í—ã—Ö–æ–¥–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ü–∏–∏" —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **–û—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–∞–π–¥–µ–Ω–æ 76 –æ—à–∏–±–æ–∫)
3. **–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑** - —Ä–∞–±–æ—Ç–∞–µ—Ç (–æ—Ü–µ–Ω–∫–∞ 60/100)
4. **–ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - —Ä–∞–±–æ—Ç–∞–µ—Ç
5. **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML –æ—Ç—á–µ—Ç)

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–î–æ–∫—É–º–µ–Ω—Ç:** –°–ó_–¢–ï–°–¢.pdf
- **–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞:** 5278 —Å–∏–º–≤–æ–ª–æ–≤
- **–û—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫:** 76
- **–¢–æ—á–Ω–æ—Å—Ç—å –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–∏:** 78.2%
- **–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 60/100
- **–í–µ—Ä–¥–∏–∫—Ç:** –¢–†–ï–ë–£–ï–¢–°–Ø –î–û–†–ê–ë–û–¢–ö–ò

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- **API Base:** `/api` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å `/api/v1`)
- **Gateway:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ outgoing control service
- **Frontend:** –ü–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –∏ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- **–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã:** –†–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –°–ª–µ–¥–∏—Ç—å –∑–∞ —Ä–∞–±–æ—Ç–æ–π gateway –∏ frontend –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –†–µ–≥—É–ª—è—Ä–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ API –ø—É—Ç—è–º
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-09-14  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –ü–†–û–ô–î–ï–ù–û
