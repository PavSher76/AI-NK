# =============================================================================
# AI-NK Конфигурация для MacBook Pro с Llama3.1:70b
# =============================================================================

# Основные настройки портов
KEYCLOAK_PORT=8081
GATEWAY_PORT=8443
FRONTEND_PORT=443
OLLAMA_PORT=11434
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
POSTGRES_PORT=5432
QDANT_PORT=6333

# Настройки базы данных
POSTGRES_DB=norms_db
POSTGRES_USER=norms_user
POSTGRES_PASSWORD=norms_password

# Настройки Redis
REDIS_PASSWORD=redispass

# Настройки Keycloak
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# Настройки Grafana
GRAFANA_ADMIN_PASSWORD=admin

# =============================================================================
# ОПТИМИЗАЦИЯ ДЛЯ LLAMA3.1:70B
# =============================================================================

# Настройки для Ollama (Llama3.1:70b)
OLLAMA_MODEL=llama3.1:70b
OLLAMA_GPU_LAYERS=40
OLLAMA_CPU_THREADS=12
OLLAMA_BATCH_SIZE=1024

# Настройки памяти для контейнеров (оптимизировано для 70b модели)
# Требуется минимум 32GB RAM для комфортной работы
OLLAMA_MEMORY_LIMIT=24G
OLLAMA_MEMORY_RESERVATION=20G

VLLM_MEMORY_LIMIT=4G
VLLM_MEMORY_RESERVATION=2G

GATEWAY_MEMORY_LIMIT=1G
GATEWAY_MEMORY_RESERVATION=512M

POSTGRES_MEMORY_LIMIT=2G
POSTGRES_MEMORY_RESERVATION=1G

QDANT_MEMORY_LIMIT=2G
QDANT_MEMORY_RESERVATION=1G

DOCUMENT_PARSER_MEMORY_LIMIT=2G
DOCUMENT_PARSER_MEMORY_RESERVATION=1G

RULE_ENGINE_MEMORY_LIMIT=2G
RULE_ENGINE_MEMORY_RESERVATION=1G

RAG_SERVICE_MEMORY_LIMIT=1G
RAG_SERVICE_MEMORY_RESERVATION=512M

# Настройки производительности для 70b
DOCKER_COMPOSE_PARALLEL=6
DOCKER_BUILDKIT=1

# Настройки для разработки
NODE_ENV=development
PYTHONUNBUFFERED=1

# Настройки логирования
LOG_LEVEL=INFO

# Дополнительные настройки для 70b модели
OLLAMA_CONTEXT_SIZE=8192
OLLAMA_ROPE_FREQ_BASE=10000
OLLAMA_ROPE_FREQ_SCALE=0.5
OLLAMA_REPEAT_PENALTY=1.1
OLLAMA_TOP_P=0.9
OLLAMA_TOP_K=40
