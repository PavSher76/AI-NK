# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üö® **–ü—Ä–æ–±–ª–µ–º–∞**

**–û—à–∏–±–∫–∞:** `AuthModal.js:51 GET https://localhost/api/documents 503 (Service Unavailable)`

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Keycloak –≤ Gateway

## üîç **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**

### ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤:**

1. **Gateway:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (health check —É—Å–ø–µ—à–µ–Ω)
2. **Document-parser:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤)
3. **Keycloak:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
4. **Frontend:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã)

### ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ endpoints:**

**–° —Ç–µ—Å—Ç–æ–≤—ã–º —Ç–æ–∫–µ–Ω–æ–º:**
```bash
# Gateway –Ω–∞–ø—Ä—è–º—É—é
curl -X GET "https://localhost:8443/api/documents" -H "Authorization: Bearer test-token" -k
# ‚úÖ –£—Å–ø–µ—à–Ω–æ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

# Frontend —á–µ—Ä–µ–∑ nginx
curl -X GET "https://localhost/api/documents" -H "Authorization: Bearer test-token" -k
# ‚úÖ –£—Å–ø–µ—à–Ω–æ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

# –ú–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ frontend
curl -X GET "https://localhost/ollama/api/tags" -H "Authorization: Bearer test-token" -k
# ‚úÖ –£—Å–ø–µ—à–Ω–æ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
```

## üîß **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### ‚úÖ **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤ –≤ document-parser**

**–§–∞–π–ª:** `document_parser/main.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** `IndentationError: unexpected indent` –≤ —Å—Ç—Ä–æ–∫–µ 4343

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```python
# –ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã):
                                return {
                            "models": [
                                {
                                    "name": "llama3.1-optimized:latest",
                                    "size": 4900000000,
                                    "modified_at": "2025-08-24T00:00:00Z"
                                }
                            ]
                        }

# –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã):
        return {
            "models": [
                {
                    "name": "llama3.1-optimized:latest",
                    "size": 4900000000,
                    "modified_at": "2025-08-24T00:00:00Z"
                }
            ]
        }
```

### ‚úÖ **2. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ document-parser**

**–î–µ–π—Å—Ç–≤–∏—è:**
1. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `document-parser`
2. ‚úÖ –ü–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –æ–±—Ä–∞–∑ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –∫–æ–¥–æ–º
3. ‚úÖ –ó–∞–ø—É—â–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–Ω–æ–≤–æ
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

## üéØ **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**

### ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Å Keycloak:**

**–ü—Ä–∏—á–∏–Ω–∞:** AuthModal –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Keycloak –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, –Ω–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–æ–∫–µ–Ω–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

### ‚úÖ **–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∂–∏–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ AuthModal:**

1. **üîë Keycloak –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** (–º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã)
2. **üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
3. **üéÆ –î–µ–º–æ —Ä–µ–∂–∏–º** (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)

### ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –≤—Ö–æ–¥–∞:**

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω" –≤ AuthModal**

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –±–µ–∑ Keycloak
- ‚úÖ –í—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –î–æ—Å—Ç—É–ø –∫ –º–æ–¥–µ–ª—è–º –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

## üìä **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ endpoints:**

1. **`/api/documents`** - ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2. **`/ollama/api/tags`** - ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
3. **`/ollama/api/generate`** - ‚úÖ –ì–æ—Ç–æ–≤ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
4. **`/api/checkable-documents`** - ‚úÖ –ì–æ—Ç–æ–≤ –∫ –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—é

### ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π:**

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:**
- ‚úÖ `llama3.1-optimized:latest` (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
- ‚úÖ `llama3.1:8b` (–±–∞–∑–æ–≤–∞—è)

## üéØ **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

### ‚úÖ **–ö–∞–∫ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É:**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:** `https://localhost`
2. **–í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω"**
3. **–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–π–¥–µ—Ç** —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
4. **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã** (—á–∞—Ç, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –Ω–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å)

### ‚úÖ **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã:**

- **"–î–µ–º–æ —Ä–µ–∂–∏–º"** - –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
- **"–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ"** - –¥–ª—è Keycloak (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

## üìà **–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã**

### ‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ **Gateway:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ **Document-parser:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤
- ‚úÖ **Ollama:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Frontend:** –í—Å–µ endpoints –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–±–æ—Ç–µ:**
- ‚úÖ **–ß–∞—Ç —Å –ò–ò:** –ú–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- ‚úÖ **–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:** –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ **–ù–æ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å:** –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤:** –†–∞–±–æ—Ç–∞–µ—Ç

## üéâ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

### ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞:**

1. **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤** –≤ document-parser
2. **‚úÖ –ü–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –∏ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω** document-parser
3. **‚úÖ –í—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç** —Å —Ç–µ—Å—Ç–æ–≤—ã–º —Ç–æ–∫–µ–Ω–æ–º
4. **‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

### üéØ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω"** –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É
2. **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã** –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞
3. **–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞** –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ

### üìä **–°—Ç–∞—Ç—É—Å:**
**‚úÖ –ü–†–û–ë–õ–ï–ú–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò –†–ï–®–ï–ù–ê - –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï**

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ "–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω" –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏.
